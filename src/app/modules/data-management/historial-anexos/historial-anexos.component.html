<div class="row" *ngIf="usuario!.isTutor()">
  <div class="col-12">
    <div class="row">
      <div class="col-12  pb-3 page-header d-flex justify-content-between">
        <h1 class="h2">Historial de Anexos</h1>
        <button type="button" class="btn btn-outline-default mr-2 float-end" placement="left"
          ngbTooltip="Haga clic para acceder a la ayuda de esta sección" (click)="abrirAyuda()">?</button>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <form>
          <div class="row p-3">
            <div class="col-12  bg-white">
              <div class="container">
                <div class="row p-3">
                  <div class="col-12  bg-white">
                    <button title="descargar todo" (click)="descargarTodo()" class="btn btn-outline-primary float-end"
                      aria-label="descargarTodo">Descargar todo</button>
                  </div>
                </div>
                <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                  class="table table-striped table-bordered row-border hover text-center table-hover">
                  <thead class="table-primary text-white">
                    <tr>
                      <th scope="col">Anexo</th>
                      <th scope="col">Empresa</th>
                      <th scope="col">Alumno</th>
                      <th scope="col">Firma de Empresa</th>
                      <th scope="col">Firma de Centro</th>
                      <th scope="col">Firma de Alumno</th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let anexo of anexosArray; index as i">

                      <td scope="col">
                        <p>{{ anexo.nombre }}</p>
                        <p style="display: none;">{{ anexo.codigo }}</p>
                      </td>

                      <td scope="col">
                        <p>{{ anexo.empresa }}</p>
                      </td>

                      <td scope="col">
                        <p>{{ anexo.alumno }}</p>
                      </td>

                      <td scope="col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                          class="bi bi-check-lg" viewBox="0 0 16 16">
                          <path *ngIf="anexo.firma_empresa == 0"
                            d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z" />
                          <path *ngIf="anexo.firma_empresa == 1"
                            d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
                        </svg>
                      </td>

                      <td scope="col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                          class="bi bi-dash-lg" viewBox="0 0 16 16">
                          <path *ngIf="anexo.firma_centro == 0"
                            d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z" />
                          <path *ngIf="anexo.firma_centro == 1"
                            d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
                        </svg>
                      </td>

                      <td scope="col">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                          class="bi bi-dash-lg" viewBox="0 0 16 16">
                          <path *ngIf="anexo.firma_alumno == 0"
                            d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z" />
                          <path *ngIf="anexo.firma_alumno == 1"
                            d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
                        </svg>
                      </td>

                      <td scope="col">
                        <p>{{ anexo.created_at}}</p>
                      </td>

                      <td scope="col">

                        <button title="descargar" (click)="descargarAnexo(anexo.codigo)"
                          class="btn btn-outline-primary px-2 py-1 me-2" type="submit" aria-label="descargar">
                          <svg class="bi" width="16" height="16">
                            <use xlink:href="#descarga" />
                          </svg>
                        </button>

                        <button title="habilitar" (click)="habilitarAnexo(anexo.codigo)"
                          class="btn btn-outline-success px-2 py-1 me-2" type="submit" aria-label="habilitar">
                          <svg class="bi" width="16" height="16">
                            <use xlink:href="#habilitar" />
                          </svg>
                        </button>

                        <button title="eliminar" (click)="eliminarAnexo(anexo.codigo)"
                          class="btn btn-outline-danger px-2 py-1 me-2" type="submit" aria-label="eliminar">
                          <svg class="bi" width="16" height="16">
                            <use xlink:href="#papelera" />
                          </svg>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>




<div class="row" *ngIf="usuario!.isJefatura() || usuario!.isDirector()">
  <div class="col-12">
    <div class="row">
      <div class="col-12  pb-3 page-header d-flex justify-content-between">
        <h1 class="h2">Gestión de Anexos</h1>
        <button type="button" class="btn btn-outline-default mr-2 float-end" placement="left"
          ngbTooltip="Haga clic para acceder a la ayuda de esta sección" (click)="abrirAyuda()">?</button>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="row p-3">
          <div class="col-12  bg-white">
            <div class="container">
              <div class="row">
                <div class="col-12">
                  <div class="row mb-2">
                    <div class="col-12 col-lg-10 d-flex justify-content-start pb-2">
                      <label class="m-1" for="grupos">Grupos </label>
                      <select (change)="buscar($event)" id="grupos" class="form-select select" name="Grupos">
                        <option *ngFor="let g of gruposArr; index as i" value="{{g.dni_profesor}}">{{g.cod_grupo}}
                        </option>
                      </select>
                    </div>
                    <div class="col-12 col-lg-2 d-flex justify-content-start justify-content-lg-end pb-2">
                      <button title="descargar todo" (click)="descargarTodo()" class="btn btn-outline-primary "
                        aria-label="descargarTodo ">Descargar todo</button>
                    </div>
                  </div>
                </div>
              </div>
              <table id="tablaDirector" datatable [dtOptions]="dtOptions " [dtTrigger]="dtTrigger "
                class="table table-striped table-bordered row-border hover text-center table-hover ">
                <thead class="table-primary text-white ">
                  <tr>
                    <th scope="col ">Anexo</th>
                    <th scope="col ">Empresa</th>
                    <th scope="col ">Alumno</th>
                    <th scope="col ">Firma de Empresa</th>
                    <th scope="col ">Firma de Centro</th>
                    <th scope="col ">Firma de Alumno</th>
                    <th scope="col">Fecha</th>
                    <th scope="col ">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let anexo of anexosArray; index as i">

                    <td scope="col ">
                      <p>{{ anexo.nombre }}</p>
                      <p style="display: none; ">{{ anexo.codigo }}</p>
                    </td>

                    <td scope="col">
                      <p>{{ anexo.empresa }}</p>
                    </td>

                    <td scope="col">
                      <p>{{ anexo.alumno }}</p>
                    </td>

                    <td scope="col ">
                      <svg xmlns="http://www.w3.org/2000/svg " width="20 " height="20 " fill="currentColor "
                        class="bi bi-check-lg " viewBox="0 0 16 16 ">
                        <path *ngIf="anexo.firma_empresa==0 "
                          d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z " />
                        <path *ngIf="anexo.firma_empresa==1 " d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247
                                              0 0 1 .02-.022Z " />
                      </svg>
                    </td>

                    <td scope="col ">
                      <svg xmlns="http://www.w3.org/2000/svg " width="20 " height="20 " fill="currentColor "
                        class="bi bi-dash-lg " viewBox="0 0 16 16 ">
                        <path *ngIf="anexo.firma_centro==0 "
                          d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z " />
                        <path *ngIf="anexo.firma_centro==1 " d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247
                                              0 0 1 .02-.022Z" />
                      </svg>
                    </td>

                    <td scope="col">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                        class="bi bi-dash-lg" viewBox="0 0 16 16">
                        <path *ngIf="anexo.firma_alumno == 0"
                          d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z" />
                        <path *ngIf="anexo.firma_alumno == 1"
                          d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
                      </svg>
                    </td>

                    <td scope="col">
                      <p>{{ anexo.created_at}}</p>
                    </td>

                    <td scope="col ">

                      <button title="descargar" (click)="descargarAnexo(anexo.codigo) "
                        class="btn btn-outline-primary px-2 py-1 me-2 " type="submit " aria-label="descargar ">
                        <svg class="bi " width="16 " height="16 ">
                          <use xlink:href="#descarga" />
                        </svg>
                      </button>

                      <button title="habilitar" (click)="habilitarAnexo(anexo.codigo)"
                        class="btn btn-outline-success px-2 py-1 me-2" type="submit" aria-label="habilitar">
                        <svg class="bi" width="16" height="16">
                          <use xlink:href="#habilitar" />
                        </svg>
                      </button>

                      <button title="eliminar" (click)="eliminarAnexo(anexo.codigo) "
                        class="btn btn-outline-danger px-2 py-1 me-2 " type="submit " aria-label="eliminar ">
                        <svg class="bi " width="16 " height="16 ">
                          <use xlink:href="#papelera" />
                        </svg>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
